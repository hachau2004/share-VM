B√¢y gi·ªù ta ki·ªÉm tra tr·ª±c ti·∫øp BankA c√≥ t·ªìn t·∫°i kh√¥ng

Ch·∫°y l·ªánh n√†y:

curl -s "http://localhost:8000/accounts/${BANKA_PUBLIC}" | jq .


N·∫øu tr·∫£ v·ªÅ:

{
  "type": "https://stellar.org/horizon-errors/not_found",
  "status": 404,
  "title": "Resource Missing"
}


‚Üí Account ch∆∞a ƒë∆∞·ª£c fund ho·∫∑c ch∆∞a ƒë∆∞·ª£c t·∫°o.

‚ùó ƒê√¢y ch√≠nh l√† nguy√™n nh√¢n b·∫°n kh√¥ng th·ªÉ transfer.
‚úÖ Gi·ªù ta l√†m ƒë√∫ng quy tr√¨nh:
1Ô∏è‚É£ Ki·ªÉm tra l·∫°i key BankA v√† Fund n√≥ b·∫±ng Friendbot

Ch·∫°y:

echo $BANKA_PUBLIC


N√≥ ph·∫£i ra:

GAFLGAYEVWODNDBACYHLDM6BPLCLCBD23RDL2PZJN74LBHSCRW5YSSXF


N·∫øu ƒë√∫ng ‚Üí fund:

curl -s "http://localhost:8000/friendbot?addr=${BANKA_PUBLIC}" | jq .

2Ô∏è‚É£ Ki·ªÉm tra BankA ƒë√£ t·ªìn t·∫°i
curl -s "http://localhost:8000/accounts/${BANKA_PUBLIC}" | jq .


N·∫øu l√∫c n√†y th·∫•y:

"balances": [...]


‚Üí OK.

3Ô∏è‚É£ L√†m l·∫°i trustline USDX cho BankA

V√¨ balance m·ªõi n√™n b·∫°n c·∫ßn t·∫°o l·∫°i trustline.

Ch·∫°y script trustline (n·∫±m trong create_usdx_network.js)
ho·∫∑c m√¨nh g·ª≠i l·ªánh nhanh:

node ~/stellar-dev/scripts/create_usdx_network.js


N·∫øu script ƒë√≥ auto t·∫°o account m·ªõi ‚Üí kh√¥ng d√πng.

üëâ Gi·∫£i ph√°p nhanh nh·∫•t: ch·∫°y trustline manually

T·∫°o file t·∫°m:

nano ~/stellar-dev/scripts/settrust.js


D√°n v√†o:

const S = require("stellar-sdk");
const fetch = require("node-fetch");
const server = new S.Server("http://localhost:8000", { allowHttp: true });

(async () => {
  const kp = S.Keypair.fromSecret(process.env.BANKA_SECRET);
  const issuer = process.env.ISSUER_PUBLIC;
  const asset = new S.Asset("USDX", issuer);
  const acct = await server.loadAccount(kp.publicKey());
  const fee = await server.fetchBaseFee();

  const tx = new S.TransactionBuilder(acct, {
    fee,
    networkPassphrase: S.Networks.TESTNET,
  })
    .addOperation(S.Operation.changeTrust({ asset }))
    .setTimeout(30)
    .build();

  tx.sign(kp);
  const res = await server.submitTransaction(tx);
  console.log(res);
})();


L∆∞u l·∫°i ‚Üí Ch·∫°y:

node ~/stellar-dev/scripts/settrust.js

4Ô∏è‚É£ Gi·ªù th·ª≠ l·∫°i chuy·ªÉn 500 USDX
node ~/stellar-dev/scripts/transfer_banka_to_bankb.js 500


L√∫c n√†y ch·∫Øc ch·∫Øn s·∫Ω ra:

Payment submitted successfully!
TX Hash: xxxxxxxxxx

üìå B·∫†N H√ÉY G·ª¨I M√åNH NGAY K·∫æT QU·∫¢ L·ªÜNH N√ÄY:
curl -s "http://localhost:8000/accounts/${BANKA_PUBLIC}" | jq .
