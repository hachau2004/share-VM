âœ… GIáº¢I PHÃP Dá»¨T ÄIá»‚M â€” KHá»I Táº O Láº I CLI ÄÃšNG CÃCH
âœ… BÆ°á»›c 1: Táº¯t toÃ n bá»™ container
docker compose -f docker-compose-bankchain.yaml down

âœ… BÆ°á»›c 2: XÃ³a CLI container hoÃ n toÃ n
docker rm -f cli

âœ… BÆ°á»›c 3: Báº­t láº¡i toÃ n bá»™ há»‡ thá»‘ng
docker compose -f docker-compose-bankchain.yaml up -d


ğŸ“Œ LÃºc nÃ y CLI sáº½ Ä‘Æ°á»£c gáº¯n Ä‘Ãºng vÃ o network bankchain_bankchain vÃ  DNS sáº½ hoáº¡t Ä‘á»™ng.

âœ… BÆ°á»›c 4: Kiá»ƒm tra CLI Ä‘Ã£ tháº¥y peer chÆ°a
docker exec -it cli bash
getent hosts peer0.banka.example.com


âœ… Náº¿u tháº¥y dáº¡ng:

172.22.0.5   peer0.banka.example.com


â†’ OK â€” CLI Ä‘Ã£ nhÃ¬n tháº¥y peer.

âŒ Náº¿u váº«n khÃ´ng tháº¥y â†’ mÃ¬nh xem láº¡i docker-compose cho báº¡n.

âœ… BÆ°á»›c 5: Export láº¡i biáº¿n mÃ´i trÆ°á»ng vÃ  join peer

Trong CLI:

export CORE_PEER_LOCALMSPID="bankaMSP"
export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/users/Admin@banka.example.com/msp
export CORE_PEER_ADDRESS=peer0.banka.example.com:7051
export CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls/ca.crt

export CHANNEL_NAME=bankchannel


Rá»“i:

peer channel join -b ./channel-artifacts/bankchannel.block

âœ… TÃ“M Láº I Lá»–I

CLI KHÃ”NG PHáº¢I á» ÄÃšNG NETWORK â†’ KHÃ”NG RESOLVE DNS â†’ KHÃ”NG TÃŒM THáº¤Y peer0.banka.example.com â†’ join channel tháº¥t báº¡i.

âš¡ Báº¡n hÃ£y cháº¡y 3 lá»‡nh nÃ y rá»“i gá»­i mÃ¬nh káº¿t quáº£ cá»§a getent hosts.peer0.banka.example.com:

docker compose -f docker-compose-bankchain.yaml down
docker rm -f cli
docker compose -f docker-compose-bankchain.yaml up -d


rá»“i:

docker exec -it cli bash
getent hosts peer0.banka.example.com 



âœ… BÆ°á»›c 1 â€” Export láº¡i biáº¿n mÃ´i trÆ°á»ng Ä‘Ãºng

ğŸ”µ VÃ€O TRONG CLI:

docker exec -it cli bash


Rá»“i cháº¡y:

export CORE_PEER_LOCALMSPID="bankaMSP"
export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/users/Admin@banka.example.com/msp
export CORE_PEER_ADDRESS=peer0.banka.example.com:7051
export CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls/ca.crt

export CHANNEL_NAME=bankchannel

âœ… BÆ°á»›c 2 â€” Test DNS xem peer cÃ³ pháº£n há»“i khÃ´ng

Trong CLI:

getent hosts peer0.banka.example.com


âœ… Náº¿u tráº£ vá» IP â†’ OK
âŒ Náº¿u KHÃ”NG tráº£ vá» gÃ¬ â†’ mÃ¬nh sáº½ kiá»ƒm tra láº¡i compose cho báº¡n.

âœ… BÆ°á»›c 3 â€” Join peer vÃ o channel
peer channel join -b ./channel-artifacts/bankchannel.block

âœ… Náº¿u váº«n lá»—i â†’ cháº¡y lá»‡nh DEBUG nÃ y vÃ  gá»­i káº¿t quáº£ cho mÃ¬nh

Trong CLI:

env | grep CORE_PEER


NgoÃ i host:

docker inspect peer0.banka.example.com | grep 7051 -n


â†’ MÃ¬nh sáº½ sá»­a dá»©t Ä‘iá»ƒm.

âœ… Network OK
âœ… Genesis OK
âœ… Channel.tx OK
âœ… CLI cháº¡y OK

ğŸ‘‰ Chá»‰ cÃ²n mÃ´i trÆ°á»ng CLI chÆ°a trá» Ä‘Ãºng vÃ o peer, sá»­a lÃ  cháº¡y Ä‘Æ°á»£c ngay.

Gá»­i mÃ¬nh káº¿t quáº£ cá»§a:

getent hosts peer0.banka.example.com
