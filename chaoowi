‚úÖ B·∫°n ch·ªâ c·∫ßn m·ªü file n√†y:

fabric-samples/bankchain/docker-compose-bankchain.yaml


v√† s·ª≠a ƒë√∫ng 4 ch·ªó volumes c·ªßa peer nh∆∞ m√¨nh ch·ªâ b√™n d∆∞·ªõi.

‚úÖ 1) T√åM 4 SERVICE PEER TRONG FILE

B·∫°n k√©o xu·ªëng file s·∫Ω th·∫•y 4 block gi·ªëng nh∆∞:

peer0.banka.example.com:
peer1.banka.example.com:
peer0.bankb.example.com:
peer1.bankb.example.com:


Trong m·ªói block ƒë√≥ s·∫Ω c√≥ ph·∫ßn:

volumes:
  - ../crypto-config/peerOrganizations/...   (SAI)


üìå B·∫°n ph·∫£i s·ª≠a l·∫°i th√†nh:

volumes:
  - ./crypto-config/peerOrganizations/...   (ƒê√öNG)


Ch·ªâ thay ../ th√†nh ./
Kh√¥ng c·∫ßn s·ª≠a g√¨ kh√°c.

‚úÖ 2) M√åNH CH·ªà ƒê√öNG N∆†I PH·∫¢I S·ª¨A ‚Äî COPY Y NGUY√äN
‚úÖ S·ª≠a peer0.banka.example.com

T√åM ƒëo·∫°n:

peer0.banka.example.com:
  ...
  volumes:
    - ../crypto-config/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/msp:/etc/hyperledger/fabric/msp
    - ../crypto-config/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls:/etc/hyperledger/fabric/tls


THAY B·∫∞NG:

  volumes:
    - ./crypto-config/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/msp:/etc/hyperledger/fabric/msp
    - ./crypto-config/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls:/etc/hyperledger/fabric/tls
    - peer0.banka.example.com:/var/hyperledger/production

‚úÖ S·ª≠a peer1.banka.example.com

T√åM:

  volumes:
    - ../crypto-config/peerOrganizations/banka.example.com/peers/peer1.banka.example.com/msp:/etc/hyperledger/fabric/msp
    - ../crypto-config/peerOrganizations/banka.example.com/peers/peer1.banka.example.com/tls:/etc/hyperledger/fabric/tls


THAY B·∫∞NG:

  volumes:
    - ./crypto-config/peerOrganizations/banka.example.com/peers/peer1.banka.example.com/msp:/etc/hyperledger/fabric/msp
    - ./crypto-config/peerOrganizations/banka.example.com/peers/peer1.banka.example.com/tls:/etc/hyperledger/fabric/tls
    - peer1.banka.example.com:/var/hyperledger/production

‚úÖ S·ª≠a peer0.bankb.example.com

T√åM:

  volumes:
    - ../crypto-config/peerOrganizations/bankb.example.com/peers/peer0.bankb.example.com/msp:/etc/hyperledger/fabric/msp
    - ../crypto-config/peerOrganizations/bankb.example.com/peers/peer0.bankb.example.com/tls:/etc/hyperledger/fabric/tls


THAY B·∫∞NG:

  volumes:
    - ./crypto-config/peerOrganizations/bankb.example.com/peers/peer0.bankb.example.com/msp:/etc/hyperledger/fabric/msp
    - ./crypto-config/peerOrganizations/bankb.example.com/peers/peer0.bankb.example.com/tls:/etc/hyperledger/fabric/tls
    - peer0.bankb.example.com:/var/hyperledger/production

‚úÖ S·ª≠a peer1.bankb.example.com

T√åM:

  volumes:
    - ../crypto-config/peerOrganizations/bankb.example.com/peers/peer1.bankb.example.com/msp:/etc/hyperledger/fabric/msp
    - ../crypto-config/peerOrganizations/bankb.example.com/peers/peer1.bankb.example.com/tls:/etc/hyperledger/fabric/tls


THAY B·∫∞NG:

  volumes:
    - ./crypto-config/peerOrganizations/bankb.example.com/peers/peer1.bankb.example.com/msp:/etc/hyperledger/fabric/msp
    - ./crypto-config/peerOrganizations/bankb.example.com/peers/peer1.bankb.example.com/tls:/etc/hyperledger/fabric/tls
    - peer1.bankb.example.com:/var/hyperledger/production

‚úÖ 3) KH·ªûI ƒê·ªòNG L·∫†I
docker compose -f docker-compose-bankchain.yaml down -v
docker compose -f docker-compose-bankchain.yaml up -d

‚úÖ 4) KI·ªÇM TRA PEER ƒê√É CH·∫†Y CH∆ØA
docker ps | grep peer0.banka


N·∫øu ch·∫°y ‚Üí CLI join channel OK.
