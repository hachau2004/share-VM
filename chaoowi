✅ Bước 1: Vào lại CLI

Trên máy host:

docker exec -it cli bash

✅ Bước 2: Set biến môi trường cho peer0.banka (vì CLI đang đại diện cho BankA)

Trong CLI:

export CORE_PEER_LOCALMSPID="bankaMSP"
export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/users/Admin@banka.example.com/msp
export CORE_PEER_ADDRESS=peer0.banka.example.com:7051
export CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls/ca.crt

export CHANNEL_NAME=bankchannel

✅ Bước 3: Join channel

Trong CLI:

peer channel join -b ./channel-artifacts/bankchannel.block

export CHANNEL_NAME=bankchannel
root@ca7633c40326:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer channel join -b ./channel-artifacts/bankchannel.block
Error: error getting endorser client for channel: endorser client failed to connect to peer0.banka.example.com:7051: failed to create new connection: connection error: desc = "transport: error while dialing: dial tcp: lookup peer0.banka.example.com on 127.0.0.11:53: no such host"
root@ca7633c40326:/opt/gopath/src/github.com/hyperledger/fabric/peer#
Nếu đúng sẽ hiện:

Successfully submitted proposal to join channel

✅ Bước 4: Set môi trường cho peer1.banka (nếu muốn join)
export CORE_PEER_ADDRESS=peer1.banka.example.com:8051

peer channel join -b ./channel-artifacts/bankchannel.block

✅ Bước 5: Set môi trường cho peer0.bankb rồi join
export CORE_PEER_LOCALMSPID="bankbMSP"
export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/bankb.example.com/users/Admin@bankb.example.com/msp
export CORE_PEER_ADDRESS=peer0.bankb.example.com:9051
export CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/bankb.example.com/peers/peer0.bankb.example.com/tls/ca.crt

peer channel join -b ./channel-artifacts/bankchannel.block

✅ Bước 6: Join tiếp peer1.bankb
export CORE_PEER_ADDRESS=peer1.bankb.example.com:10051

peer channel join -b ./channel-artifacts/bankchannel.block

✅ Gửi mình Screenshot khi bạn chạy:
peer channel join -b ./channel-artifacts/bankchannel.block
