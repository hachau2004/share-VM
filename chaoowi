∆∞·ªõc 1. C·∫≠p nh·∫≠t Ubuntu

M·ªü terminal v√† ch·∫°y:

sudo apt update


M·ª•c ƒë√≠ch: l√†m m·ªõi danh s√°ch g√≥i ph·∫ßn m·ªÅm trong kho Ubuntu.

üîπ B∆∞·ªõc 2. C√†i c√¥ng c·ª• c∆° b·∫£n
sudo apt install -y curl git docker.io


D√πng ƒë·ªÉ t·∫£i file (curl), clone repo (git), v√† ch·∫°y container (docker).

Ki·ªÉm tra:

curl --version
git --version
docker --version
X√≥a b·∫£n c≈© (x86_64) v·ª´a t·∫£i
sudo rm /usr/local/lib/docker/cli-plugins/docker-compose

üîπ 2Ô∏è‚É£ T·∫£i ƒë√∫ng b·∫£n d√†nh cho ARM64
sudo curl -fSL "https://github.com/docker/compose/releases/latest/download/docker-compose-linux-aarch64" \
  -o /usr/local/lib/docker/cli-plugins/docker-compose

üîπ 3Ô∏è‚É£ C·∫•p quy·ªÅn th·ª±c thi
sudo chmod +x /usr/local/lib/docker/cli-plugins/docker-compose

üîπ 4Ô∏è‚É£ Ki·ªÉm tra l·∫°i
docker compose version


‚úÖ N·∫øu th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y k·∫øt qu·∫£ ki·ªÉu:

Docker Compose version v2.xx.x

‚ö†Ô∏è N·∫øu v·∫´n b√°o l·ªói ‚Äúunknown command‚Äù

Ch·∫°y th·ª≠:

docker --help | grep compose


N·∫øu kh√¥ng th·∫•y g√¨, kh·ªüi ƒë·ªông l·∫°i d·ªãch v·ª• Docker:

sudo systemctl restart docker


R·ªìi ki·ªÉm tra l·∫°i l·ªánh:

docker compose version


üîπ B∆∞·ªõc 3. C√†i Docker Compose (v2)
sudo mkdir -p /usr/local/lib/docker/cli-plugins
sudo curl -fSL "https://github.com/docker/compose/releases/latest/download/docker-compose-linux-x86_64" \
  -o /usr/local/lib/docker/cli-plugins/docker-compose
sudo chmod +x /usr/local/lib/docker/cli-plugins/docker-compose
docker compose version

üîπ B∆∞·ªõc 4. Cho ph√©p ch·∫°y Docker kh√¥ng c·∫ßn sudo
sudo usermod -aG docker $USER
newgrp docker

üîπ B∆∞·ªõc 5. C√†i Node.js 22.x
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt-get install -y nodejs
nodejs -v
npm -v

üîπ B∆∞·ªõc 6. C√†i Go 1.24.0
wget https://go.dev/dl/go1.24.0.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.24.0.linux-amd64.tar.gz
echo 'export GOROOT=/usr/local/go' >> ~/.bashrc
echo 'export GOPATH=$HOME/go' >> ~/.bashrc
echo 'export PATH=$PATH:$GOROOT/bin:$GOPATH/bin' >> ~/.bashrc
source ~/.bashrc
go version

FIX GO:
X√≥a b·∫£n Go c≈© b·ªã sai ki·∫øn tr√∫c:

sudo rm -rf /usr/local/go


2Ô∏è‚É£ T·∫£i ƒë√∫ng b·∫£n Go 1.24.0 ARM64:

wget https://go.dev/dl/go1.24.0.linux-arm64.tar.gz


3Ô∏è‚É£ Gi·∫£i n√©n v√† c·∫•u h√¨nh l·∫°i:

sudo tar -C /usr/local -xzf go1.24.0.linux-arm64.tar.gz
echo 'export GOROOT=/usr/local/go' >> ~/.bashrc
echo 'export GOPATH=$HOME/go' >> ~/.bashrc
echo 'export PATH=$PATH:$GOROOT/bin:$GOPATH/bin' >> ~/.bashrc
source ~/.bashrc


4Ô∏è‚É£ Ki·ªÉm tra l·∫°i:

go version


‚úÖ K·∫øt qu·∫£ mong ƒë·ª£i:

go version go1.24.0 linux/arm64


üîπ B∆∞·ªõc 7. C√†i Hyperledger Fabric 3.1.0 v√† CA 1.5.10
git clone https://github.com/hyperledger/fabric-samples.git
cd fabric-samples
curl -LO https://github.com/hyperledger/fabric/releases/download/v3.1.0/hyperledger-fabric-linux-amd64-3.1.0.tar.gz
tar -xzf hyperledger-fabric-linux-amd64-3.1.0.tar.gz -C .

curl -LO https://github.com/hyperledger/fabric-ca/releases/download/v1.5.10/hyperledger-fabric-ca-linux-amd64-1.5.10.tar.gz
tar -xzf hyperledger-fabric-ca-linux-amd64-1.5.10.tar.gz -C .

echo 'export PATH=$HOME/fabric-samples/bin:$PATH' >> ~/.bashrc
echo 'export FABRIC_CFG_PATH=$HOME/fabric-samples/config' >> ~/.bashrc
source ~/.bashrc

peer version
fabric-ca-client version

FIX PEER VERSION:
üîπ 1Ô∏è‚É£ X√≥a b·∫£n c≈© b·ªã sai ki·∫øn tr√∫c
rm -rf ~/fabric-samples/bin

üîπ 2Ô∏è‚É£ T·∫£i ƒë√∫ng b·∫£n cho ARM64

Hi·ªán Hyperledger ch∆∞a ph√°t h√†nh binary ch√≠nh th·ª©c cho ARM,
nh∆∞ng c√≥ th·ªÉ ch·∫°y b·∫±ng Docker ARM64 images, t·ª©c l√† b·ªè qua ph·∫ßn binary,
v√¨ c√°c container (orderer, peer, CA‚Ä¶) ƒë·ªÅu c√≥ image ARM64 s·∫µn.

üëâ T·∫£i b·ªô fabric-samples ƒë√∫ng c√°ch:

cd ~
rm -rf fabric-samples
git clone https://github.com/hyperledger/fabric-samples.git
cd fabric-samples

üîπ 3Ô∏è‚É£ K√©o v·ªÅ Docker image ARM64

Ch·∫°y l·ªánh n√†y (thay cho vi·ªác ch·∫°y peer tr·ª±c ti·∫øp):

docker pull hyperledger/fabric-peer:3.1
docker pull hyperledger/fabric-orderer:3.1
docker pull hyperledger/fabric-ca:1.5.10
docker pull hyperledger/fabric-tools:3.1

FIX DOCKER:
docker pull hyperledger/fabric-tools:2.5
üí° Sau khi t·∫£i xong, ki·ªÉm tra to√†n b·ªô image:
bash
Sao ch√©p m√£
docker images | grep hyperledger



C√°c image n√†y ƒë·ªÅu c√≥ b·∫£n linux/arm64 ‚Äî VirtualBox ARM s·∫Ω ch·∫°y ƒë∆∞·ª£c.

üîπ 4Ô∏è‚É£ S·ª≠a l·∫°i bi·∫øn m√¥i tr∆∞·ªùng (ch·ªâ gi·ªØ ph·∫ßn config)

Kh√¥ng c·∫ßn PATH tr·ªè t·ªõi bin/ n·ªØa:

echo 'export FABRIC_CFG_PATH=$HOME/fabric-samples/config' >> ~/.bashrc
source ~/.bashrc

üîπ 5Ô∏è‚É£ Ki·ªÉm tra Docker image
docker images | grep hyperledger


‚Üí N·∫øu th·∫•y c√°c d√≤ng fabric-peer, fabric-orderer, fabric-ca l√† OK ‚úÖ



‚öôÔ∏è PH·∫¶N 2 ‚Äì LAB 4.1: D·ª±ng m·∫°ng Bankchain
üîπ B∆∞·ªõc 1. Clone project Bankchain
cd ~/fabric-samples
git clone https://github.com/PacktPublishing/Blockchain-Development-for-Finance-Projects.git
cd Blockchain-Development-for-Finance-Projects/Chapter4/bankchain

FIX:
cd ~/fabric-samples/Blockchain-Development-for-Finance-Projects
ls

üîπ B∆∞·ªõc 2. Sinh ch·ª©ng ch·ªâ s·ªë
cryptogen generate --config=./crypto-config.yaml --output=./crypto-config

FIXX:
C√°ch kh·∫Øc ph·ª•c l·ªói cryptogen: command not found
üß© B∆∞·ªõc 1. T·∫£i c√°c binary c·ªßa Hyperledger Fabric

Ch·∫°y c√°c l·ªánh sau:

cd ~
curl -sSL https://bit.ly/2ysbOFE | bash -s


üîπ L·ªánh n√†y s·∫Ω t·∫£i v·ªÅ c√°c c√¥ng c·ª• (tool binaries) c·ªßa Fabric g·ªìm:
cryptogen, configtxgen, peer, orderer, v.v.
V√† t·ª± ƒë·ªông ƒë·∫∑t ch√∫ng trong th∆∞ m·ª•c ~/fabric-samples/bin.

üß© B∆∞·ªõc 2. Th√™m v√†o PATH

Sau khi t·∫£i xong, th√™m d√≤ng sau v√†o file ~/.bashrc:

export PATH=$PATH:$HOME/fabric-samples/bin


R·ªìi ch·∫°y l·∫°i:

source ~/.bashrc

üß© B∆∞·ªõc 3. Ki·ªÉm tra l·∫°i

Ch·∫°y:

cryptogen version


‚úÖ N·∫øu hi·ªán ra th√¥ng tin nh∆∞:

cryptogen:
 Version: 2.5.0
...


l√† ƒë√£ OK.

Sau ƒë√≥, quay l·∫°i th∆∞ m·ª•c bankchain v√† ch·∫°y l·∫°i l·ªánh:

cd ~/fabric-samples/Blockchain-Development-for-Finance-Projects/Chapter\ 4/bankchain
cryptogen generate --config=./crypto-config.yaml --output=./crypto-config

üîπ B∆∞·ªõc 3. Sinh channel block
export FABRIC_CFG_PATH=$PWD
mkdir -p channel-artifacts
configtxgen -profile BankChannel -channelID bankchannel -outputBlock ./channel-artifacts/bankchannel.block

FIXXXX:
B∆∞·ªõc 1 ‚Äì Ki·ªÉm tra l·∫°i file configtx.yaml

Ch·∫°y l·ªánh sau trong th∆∞ m·ª•c bankchain:

cat configtx.yaml | grep Profile -A 5


N·∫øu kh√¥ng th·∫•y d√≤ng:

Profiles:
    BankChannel:


‚Üí th√¨ b·∫°n ƒëang thi·∫øu ƒë·ªãnh nghƒ©a profile BankChannel.

B∆∞·ªõc 2 ‚Äì M·ªü file configtx.yaml v√† th√™m ƒëo·∫°n sau ·ªü cu·ªëi (n·∫øu ch∆∞a c√≥)

M·ªü file:

nano configtx.yaml


Profiles:

    TwoOrgsOrdererGenesis:
        <<: *ChannelDefaults
        Orderer:
            <<: *OrdererDefaults
            Organizations:
                - *OrdererOrg
            Capabilities:
                <<: *OrdererCapabilities
        Consortiums:
            SampleConsortium:
                Organizations:
                    - *Org1
                    - *Org2

    TwoOrgsChannel:
        Consortium: SampleConsortium
        <<: *ChannelDefaults
        Application:
            <<: *ApplicationDefaults
            Organizations:
                - *Org1
                - *Org2
            Capabilities:
                <<: *ApplicationCapabilities

    BankChannel:
        Consortium: SampleConsortium
        <<: *ChannelDefaults
        Application:
            <<: *ApplicationDefaults
            Organizations:
                - *Org1
                - *Org2
            Capabilities:
                <<: *ApplicationCapabilities



(L∆∞u √Ω: ‚ÄúBankA‚Äù v√† ‚ÄúBankB‚Äù ph·∫£i tr√πng v·ªõi t√™n Org trong ph·∫ßn Organizations: ·ªü ƒë·∫ßu file configtx.yaml.)

export FABRIC_CFG_PATH=$PWD

B∆∞·ªõc 3 ‚Äì Ch·∫°y l·∫°i l·ªánh
üß© 1Ô∏è‚É£ T·∫°o genesis block:
configtxgen -profile TwoOrgsOrdererGenesis -channelID system-channel -outputBlock ./channel-artifacts/genesis.block

üß© 2Ô∏è‚É£ Sau ƒë√≥ t·∫°o channel block (BankChannel):
configtxgen -profile BankChannel -channelID bankchannel -outputCreateC
Sau khi l∆∞u file (Ctrl + O, Enter, Ctrl + X):

configtxgen -profile BankChannel -channelID bankchannel -outputBlock ./channel-artifacts/bankchannel.block

Fix:
configtxgen -profile TwoOrgsOrdererGenesis -channelID system-channel -outputBlock ./channel-artifacts/genesis.block
configtxgen -profile BankChannel -channelID bankchannel -outputCreateChannelTx ./channel-artifacts/bankchannel.tx


N·∫øu th·∫•y:

INFO Generated new channel genesis block

1. T·∫°o th∆∞ m·ª•c dummy nh∆∞ h∆∞·ªõng d·∫´n

Ch·∫°y:

touch dummy_fabric
mkdir -p orderer-config

2. S·ª≠a file docker-compose-bankchain.yaml

M·ªü file:

nano docker-compose-bankchain.yaml


Trong ph·∫ßn volumes c·ªßa container (th∆∞·ªùng l√† orderer ho·∫∑c cli), th√™m 2 d√≤ng sau:

      - ./dummy_fabric:/etc/hyperledger/fabric
      - ./orderer-config:/etc/hyperledger/orderer-cfg


L∆∞u l·∫°i:
Ctrl + O ‚Üí Enter ‚Üí Ctrl + X

3. Ch·∫°y l·∫°i Docker Compose
docker compose -f docker-compose-bankchain.yaml up -d


‚û°Ô∏è Sau khi s·ª≠a ƒë√∫ng, l·ªói invalid reference format s·∫Ω h·∫øt v√† Docker s·∫Ω k√©o c√°c image Fabric.

‚úÖ B∆Ø·ªöC 5 ‚Äî Ki·ªÉm tra c√°c container ƒëang ch·∫°y

Ch·∫°y:

docker ps


Ph·∫£i th·∫•y c√°c container orderer, peer0.banka, peer0.bankb, cli ƒëang ‚ÄúUp‚Äù.

ü™™ PH·∫¶N 3 ‚Äì LAB 4.2: T·∫°o danh t√≠nh cho c√°c ng√¢n h√†ng
npm i fabric-ca-client fabric-network
node enrollAdmin-BankA.js
node registerUser-BankA.js
node enrollAdmin-BankB.js
node registerUser-BankB.js
ls wallet-BankA/
ls wallet-BankB/


K·∫øt qu·∫£: 2 th∆∞ m·ª•c wallet ch·ª©a danh t√≠nh admin v√† user cho 2 ng√¢n h√†ng.


version: '2'

networks:
  bankchain:

services:

  orderer.example.com:
    image: hyperledger/fabric-orderer:2.5
    container_name: orderer.example.com
    environment:
      - ORDERER_GENERAL_LOGLEVEL=info
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/orderer.genesis.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
    command: orderer
    ports:
      - 7050:7050
    volumes:
      - ./channel-artifacts/genesis.block:/var/hyperledger/orderer/orderer.genesis.block
      - ./crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/msp:/var/hyperledger/orderer/msp
    networks:
      - bankchain

  peer0.banka.example.com:
    container_name: peer0.banka.example.com
    image: hyperledger/fabric-peer:2.5
    environment:
      - CORE_PEER_ID=peer0.banka.example.com
      - CORE_PEER_ADDRESS=peer0.banka.example.com:7051
      - CORE_PEER_LISTENADDRESS=0.0.0.0:7051
      - CORE_PEER_CHAINCODEADDRESS=peer0.banka.example.com:7052
      - CORE_PEER_LOCALMSPID=BankAMSP
    volumes:
      - ./crypto-config/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/msp:/etc/hyperledger/fabric/msp
    ports:
      - 7051:7051
    networks:
      - bankchain

  peer0.bankb.example.com:
    container_name: peer0.bankb.example.com
    image: hyperledger/fabric-peer:2.5
    environment:
      - CORE_PEER_ID=peer0.bankb.example.com
      - CORE_PEER_ADDRESS=peer0.bankb.example.com:8051
      - CORE_PEER_LISTENADDRESS=0.0.0.0:8051
      - CORE_PEER_CHAINCODEADDRESS=peer0.bankb.example.com:8052
      - CORE_PEER_LOCALMSPID=BankBMSP
    volumes:
      - ./crypto-config/peerOrganizations/bankb.example.com/peers/peer0.bankb.example.com/msp:/etc/hyperledger/fabric/msp
    ports:
      - 8051:8051
    networks:
      - bankchain

  cli:
    container_name: cli
    image: hyperledger/fabric-tools:2.5
    tty: true
    environment:
      - SYS_CHANNEL=bankchain
      - GOPATH=/opt/gopath
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_LOGGING_LEVEL=DEBUG
      - CORE_PEER_ID=cli
      - CORE_PEER_ADDRESS=peer0.banka.example.com:7051
      - CORE_PEER_LOCALMSPID=BankAMSP
      - CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/users/Admin@banka.example.com/msp
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: /bin/bash
    volumes:
      - /var/run/:/host/var/run/
      - ./crypto-config:/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/
      - ./scripts:/opt/gopath/src/github.com/hyperledger/fabric/peer/scripts/
      - ./channel-artifacts:/opt/gopath/src/github.com/hyperledger/fabric/peer/channel-artifacts
    networks:
      - bankchain

sudo apt update
sudo apt install ca-certificates curl gnupg -y
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \
  https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y
B√¢y gi·ªù b·∫°n c√≥ th·ªÉ ti·∫øp t·ª•c ch·∫°y l·ªánh n√†y ƒë·ªÉ kh·ªüi t·∫°o m·∫°ng Fabric:
docker compose -f docker-compose-bankchain.yaml up -d


üí° L∆∞u √Ω:

N·∫øu file c·ªßa b·∫°n t√™n th·∫≠t l√† docker-compose-bankchain.yaml (kh√¥ng c√≥ d·∫•u g·∫°ch gi·ªØa bank v√† chain), h√£y ki·ªÉm tra b·∫±ng:

ls | grep docker-compose


r·ªìi d√πng ƒë√∫ng t√™n file trong l·ªánh.

Sau khi ch·∫°y, ki·ªÉm tra c√°c container c√≥ ch·∫°y ch∆∞a:

docker ps


B·∫°n s·∫Ω th·∫•y c√°c container nh∆∞ orderer.example.com, peer0.banka.example.com, cli, couchdb, v.v.


version: '2'

volumes:
  orderer.example.com:
  peer0.banka.example.com:
  peer1.banka.example.com:
  peer0.bankb.example.com:
  peer1.bankb.example.com:

networks:
  bankchain:

services:

  orderer.example.com:
    extends:
      file: base/docker-compose-base-bankchain.yaml
      service: orderer.example.com
    container_name: orderer.example.com
    networks:
      - bankchain

  peer0.banka.example.com:
    container_name: peer0.banka.example.com
    extends:
      file: base/docker-compose-base-bankchain.yaml
      service: peer0.banka.example.com
    networks:
      - bankchain
    environment:
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=couchdb0:5984
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=
    depends_on:
      - couchdb0

  peer1.banka.example.com:
    container_name: peer1.banka.example.com
    extends:
      file: base/docker-compose-base-bankchain.yaml
      service: peer1.banka.example.com
    networks:
      - bankchain
    environment:
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=couchdb1:5984
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=
    depends_on:
      - couchdb1

  peer0.bankb.example.com:
    container_name: peer0.bankb.example.com
    extends:
      file: base/docker-compose-base-bankchain.yaml
      service: peer0.bankb.example.com
    networks:
      - bankchain
    environment:
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=couchdb2:5984
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=
    depends_on:
      - couchdb2

  peer1.bankb.example.com:
    container_name: peer1.bankb.example.com
    extends:
      file: base/docker-compose-base-bankchain.yaml
      service: peer1.bankb.example.com
    networks:
      - bankchain
    environment:
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=couchdb3:5984
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=
    depends_on:
      - couchdb3

  cli:
    container_name: cli
    image: hyperledger/fabric-tools:2.2
    tty: true
    stdin_open: true
    environment:
      - SYS_CHANNEL=system-channel
      - GOPATH=/opt/gopath
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - FABRIC_LOGGING_SPEC=INFO
      - CORE_PEER_ID=cli
      - CORE_PEER_ADDRESS=peer0.banka.example.com:7051
      - CORE_PEER_LOCALMSPID=BankAMSP
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/peers/peer0.banka.example.com/tls/ca.crt
      - CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/banka.example.com/users/Admin@banka.example.com/msp
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: /bin/bash
    volumes:
      - /var/run/:/host/var/run/
      - ./../chaincode/:/opt/gopath/src/github.com/chaincode
      - ./crypto-config:/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/
      - ./scripts:/opt/gopath/src/github.com/hyperledger/fabric/peer/scripts/
      - ./channel-artifacts:/opt/gopath/src/github.com/hyperledger/fabric/peer/channel-artifacts
      - ./dummy_fabric:/etc/hyperledger/fabric
      - ./orderer-config:/etc/hyperledger/orderer-cfg
    depends_on:
      - orderer.example.com
      - peer0.banka.example.com
      - peer1.banka.example.com
      - peer0.bankb.example.com
      - peer1.bankb.example.com
    networks:
      - bankchain

  couchdb0:
    container_name: couchdb0
    image: hyperledger/fabric-couchdb:0.4.20
    environment:
      - COUCHDB_USER=
      - COUCHDB_PASSWORD=
    ports:
      - "5984:5984"
    networks:
      - bankchain

  couchdb1:
    container_name: couchdb1
    image: hyperledger/fabric-couchdb:0.4.20
    environment:
      - COUCHDB_USER=
      - COUCHDB_PASSWORD=
    ports:
      - "6984:5984"
    networks:
      - bankchain

  couchdb2:
    container_name: couchdb2
    image: hyperledger/fabric-couchdb:0.4.20
    environment:
      - COUCHDB_USER=
      - COUCHDB_PASSWORD=
    ports:
      - "7984:5984"
    networks:
      - bankchain

  couchdb3:
    container_name: couchdb3
    image: hyperledger/fabric-couchdb:0.4.20
    environment:
      - COUCHDB_USER=
      - COUCHDB_PASSWORD=
    ports:
      - "8984:5984"
    networks:
      - bankchain
