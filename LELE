✅ BƯỚC 5 — KHỞI ĐỘNG CA + PEER + ORDERER
✅ 5.1 Start CA (bạn đã chạy)
✅ 5.2 Start peer + orderer
docker compose -f docker-compose-bankchain.yaml up -d


Kiểm tra:

docker ps


Phải thấy:

✅ orderer.bankchain.com
✅ peer0.banka
✅ peer1.banka
✅ peer0.bankb
✅ peer1.bankb
✅ couchdb (nếu dùng)

✅ BƯỚC 6 — TẠO CHANNEL
6.1 Tạo channel từ CLI
docker exec -it cli bash


Trong CLI:

peer channel create -o orderer.bankchain.com:7050 \
-c bankchain \
-f ./channel-artifacts/channel.tx \
--outputBlock ./channel-artifacts/bankchain.block

✅ BƯỚC 7 — JOIN PEERS VÀO CHANNEL
Bank A
export CORE_PEER_LOCALMSPID="BankAMSP"
export CORE_PEER_ADDRESS=peer0.banka.example.com:7051

peer channel join -b ./channel-artifacts/bankchain.block

Bank B
export CORE_PEER_LOCALMSPID="BankBMSP"
export CORE_PEER_ADDRESS=peer0.bankb.example.com:8051

peer channel join -b ./channel-artifacts/bankchain.block

✅ BƯỚC 8 — CẬP NHẬT ANCHOR PEER
Bank A
peer channel update \
-o orderer.bankchain.com:7050 \
-c bankchain \
-f ./channel-artifacts/bankaMSPanchors.tx

Bank B
peer channel update \
-o orderer.bankchain.com:7050 \
-c bankchain \
-f ./channel-artifacts/bankbMSPanchors.tx

✅ BƯỚC 9 — DEPLOY CHAINCODE
9.1 Install chaincode
peer lifecycle chaincode install bankchain.tar.gz

9.2 Approve + Commit

(Đoạn này tùy theo bạn có file chaincode nào – bạn gửi mình mình set đúng)

✅ BƯỚC 10 — TEST GIAO DỊCH
Query thử:
peer chaincode query -C bankchain -n bankcc -c '{"Args":["GetAllCustomers"]}'
