âœ… BÆ¯á»šC 5 â€” KHá»I Äá»˜NG CA + PEER + ORDERER
âœ… 5.1 Start CA (báº¡n Ä‘Ã£ cháº¡y)
âœ… 5.2 Start peer + orderer
docker compose -f docker-compose-bankchain.yaml up -d
âœ… âœ… CÃ¡ch 1 â€” Gá»¡ CLI ra luÃ´n (khuyáº¿n nghá»‹)

VÃ¬ Fabric 3.1 khÃ´ng dÃ¹ng CLI container ná»¯a.

ğŸ‘‰ Má»Ÿ file:

~/fabric-samples/bankchain/docker-compose-bankchain.yaml


TÃ¬m Ä‘oáº¡n:

cli:
  container_name: cli
  image: hyperledger/fabric-tools:3.1

Kiá»ƒm tra:

docker ps


Pháº£i tháº¥y:

âœ… orderer.bankchain.com
âœ… peer0.banka
âœ… peer1.banka
âœ… peer0.bankb
âœ… peer1.bankb
âœ… couchdb (náº¿u dÃ¹ng)

âœ… BÆ¯á»šC 6 â€” Táº O CHANNEL
6.1 Táº¡o channel tá»« CLI
docker exec -it cli bash


Trong CLI:

peer channel create -o orderer.bankchain.com:7050 \
-c bankchain \
-f ./channel-artifacts/channel.tx \
--outputBlock ./channel-artifacts/bankchain.block

âœ… BÆ¯á»šC 7 â€” JOIN PEERS VÃ€O CHANNEL
Bank A
export CORE_PEER_LOCALMSPID="BankAMSP"
export CORE_PEER_ADDRESS=peer0.banka.example.com:7051

peer channel join -b ./channel-artifacts/bankchain.block

Bank B
export CORE_PEER_LOCALMSPID="BankBMSP"
export CORE_PEER_ADDRESS=peer0.bankb.example.com:8051

peer channel join -b ./channel-artifacts/bankchain.block

âœ… BÆ¯á»šC 8 â€” Cáº¬P NHáº¬T ANCHOR PEER
Bank A
peer channel update \
-o orderer.bankchain.com:7050 \
-c bankchain \
-f ./channel-artifacts/bankaMSPanchors.tx

Bank B
peer channel update \
-o orderer.bankchain.com:7050 \
-c bankchain \
-f ./channel-artifacts/bankbMSPanchors.tx

âœ… BÆ¯á»šC 9 â€” DEPLOY CHAINCODE
9.1 Install chaincode
peer lifecycle chaincode install bankchain.tar.gz

9.2 Approve + Commit

(Äoáº¡n nÃ y tÃ¹y theo báº¡n cÃ³ file chaincode nÃ o â€“ báº¡n gá»­i mÃ¬nh mÃ¬nh set Ä‘Ãºng)

âœ… BÆ¯á»šC 10 â€” TEST GIAO Dá»ŠCH
Query thá»­:
peer chaincode query -C bankchain -n bankcc -c '{"Args":["GetAllCustomers"]}'
